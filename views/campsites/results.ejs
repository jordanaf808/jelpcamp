<%- include("../partials/header") %>


<div class="container-fluid p-0 main-body">
	<header class ="jumbotron">
		<div class="container px-0 text-center">
			<h1 class="display-4 font-weight-bolder text-center pt-4">
			Welcome To YelpCamp. 
			</h1>
			<h1 class="display-4 "><i class="fas fa-campground"></i></h1>
			<!-- <p class="h6 pt-5 pl-0">
				View some of our hand-picked campgrounds
			</p> -->
			<!-- <p>
				<a class="btn btn-primary btn-md mt-5 pb-2" href="/campgrounds/new">Find Your Next Adventure!</a>
			</p> -->
		</div>
	</header>

	<div class="container-fluid search-body">
			<h1 class="my-5" style="text-align: center">Find A Campground</h1>
			<!--Put an input form in a div with css style to group them together  -->
				<form action="/campsites/search" method="GET" id="searchForm">
				<div class="form-row my-sm-3">	
					<!-- Put each input in a div.formgroup to give a little spacing between them	 -->
					<div class="form-group col-10 col-sm-4 col-md-3">
						<% console.log(searchParams.query) %>
						<% if(searchParams.query != null && searchParams.query.length >0){ %>
							<input class="form-control" type="text" name="search" id="search"
							value="<%=searchParams.query%>"/>
							<% } else { %>
								<input class="form-control" type="text" name="search" id="search"
								placeholder="Keyword Search"/>
							<% }; %>
					</div>
					<div class="form-group col-10 col-sm-4 col-md-3">
						<select class="custom-select my-1 mr-sm-2" id="search-activities" name="activities" aria-label="Select Activity">
							<% if(searchParams.activity != null && searchParams.activity.length > 0){ %>
								<option value="<%=searchParams.activity%>"><%=searchParams.activity%></option>
								<% } else { %>
								<option value="">Select Activity</option>
							<% }; %>
							<option value="">n/a</option>
							<option value="100047">ARCHERY</option>
							<option value="100036">BACKPACKING</option>
							<option value="4">AUTO TOURING</option>
							<option value="5">BIKING</option>
							<option value="6">BOATING</option>
							<option value="9">CAMPING</option>
							<option value="100008">CANOEING</option>
							<option value="7">CLIMBING</option>
							<option value="100049">ACCESSIBLE SWIMMING</option>
							<option value="11">FISHING</option>
							<option value="14">HIKING</option>
							<option value="8">HISTORIC &amp; CULTURAL SITE</option>
							<option value="100048">HISTORIC SITES</option>
							<option value="15">HORSEBACK RIDING</option>
							<option value="109">HORSE CAMPING</option>
							<option value="16">HUNTING</option>
							<option value="100080">CAVING</option>
							<option value="100012">CLAM DIGGING</option>
							<option value="100043">AMPHITHEATER</option>
							<option value="100021">ANTIQUING</option>
							<option value="100064">BADMINTON</option>
							<option value="100010">BEACH CAMPING</option>
							<option value="100011">BEACHCOMBING</option>
							<option value="100009">BERRY PICKING</option>
							<option value="100017">BIRDING</option>
							<option value="100061">BIRD WATCHING</option>
							<option value="100077">BOAT RENTAL</option>
							<option value="100013">CRABBING</option>
							<option value="100060">CRAWFISHING</option>
							<option value="100020">CROSS COUNTRY SKIING</option>
							<option value="100025">CULTURAL ACTIVITIES</option>
							<option value="32">DAY USE AREA</option>
							<option value="100024">DISC GOLF</option>
							<option value="107">DIVING</option>
							<option value="100054">DOWNHILL SKIING</option>
							<option value="100044">EDUCATIONAL PROGRAMS</option>
							<option value="103">ENVIRONMENTAL EDUCATION</option>
							<option value="100026">EVENING PROGRAMS</option>
							<option value="30">FIRE LOOKOUTS/CABINS OVERNIGHT</option>
							<option value="100031">GOLD PANNING</option>
							<option value="100079">GOLF</option>
							<option value="100078">GONDOLA RIDES</option>
							<option value="100027">GUIDED INTERPRETIVE WALKS</option>
						</select>
					</div>
					<div class="form-group col-10 col-sm-4 col-md-3">
						<select class="custom-select my-1 mr-sm-2" name="state" id="stateSelect" aria-label="Select A State">
							<% if(searchParams.state != null && searchParams.state.length > 0){ %>
								<option value="<%=searchParams.state%>" selected><%=searchParams.state%></option>
								<% } else { %>
								<option value="" selected>Choose A State</option>
									<% }; %>
							<option value="">n/a</option>
							<option value="AL">Alabama</option>
							<option value="AK">Alaska</option>
							<option value="AZ">Arizona</option>
							<option value="AR">Arkansas</option>
							<option value="CA">California</option>
							<option value="CO">Colorado</option>
							<option value="CT">Connecticut</option>
							<option value="DE">Delaware</option>
							<option value="DC">District Of Columbia</option>
							<option value="FL">Florida</option>
							<option value="GA">Georgia</option>
							<option value="HI">Hawaii</option>
							<option value="ID">Idaho</option>
							<option value="IL">Illinois</option>
							<option value="IN">Indiana</option>
							<option value="IA">Iowa</option>
							<option value="KS">Kansas</option>
							<option value="KY">Kentucky</option>
							<option value="LA">Louisiana</option>
							<option value="ME">Maine</option>
							<option value="MD">Maryland</option>
							<option value="MA">Massachusetts</option>
							<option value="MI">Michigan</option>
							<option value="MN">Minnesota</option>
							<option value="MS">Mississippi</option>
							<option value="MO">Missouri</option>
							<option value="MT">Montana</option>
							<option value="NE">Nebraska</option>
							<option value="NV">Nevada</option>
							<option value="NH">New Hampshire</option>
							<option value="NJ">New Jersey</option>
							<option value="NM">New Mexico</option>
							<option value="NY">New York</option>
							<option value="NC">North Carolina</option>
							<option value="ND">North Dakota</option>
							<option value="OH">Ohio</option>
							<option value="OK">Oklahoma</option>
							<option value="OR">Oregon</option>
							<option value="PA">Pennsylvania</option>
							<option value="RI">Rhode Island</option>
							<option value="SC">South Carolina</option>
							<option value="SD">South Dakota</option>
							<option value="TN">Tennessee</option>
							<option value="TX">Texas</option>
							<option value="UT">Utah</option>
							<option value="VT">Vermont</option>
							<option value="VA">Virginia</option>
							<option value="WA">Washington</option>
							<option value="WV">West Virginia</option>
							<option value="WI">Wisconsin</option>
							<option value="WY">Wyoming</option>
						</select>
					</div>
					<div class="form-group col-10 col-sm-4 col-md-3">
						<input class="form-control"	type="text"	name="location"	id="location"	placeholder="e.g. Yosemite National Park, CA"/>
					</div>
					<div class="form-group col-10 col-sm-4 col-md-3">
						<select 	class="custom-select my-1 mr-sm-2"	id="limit-results" 	name="limit"	aria-label="Select Activity">
							<% if(searchParams.limit != null && searchParams.limit.length > 0){ %>
								<option value="<%=searchParams.limit%>"><%=searchParams.limit%></option>
							<% } else { %>
								<option value="" selected>Limit Results</option>
							<% }; %>
							<option value="" selected>n/a</option>
							<option value=10 >10</option>
							<option value=25 >25</option>
							<option value=50 >50</option>
						</select>
					</div>
				</div>
				<div class="form-row col-10 col-sm-7 col-lg-5">
					<button class="btn btn-md btn-success btn-block">
						Search Recreation.gov
					</button>
				</div>	
				</form>

		<div class="row my-5">
			<div class="map-box col-11 col-sm-10">
				<div id="map"></div>						
			</div>			
		</div>  

	</div>


	
	<div class="row text-center">
		<div class="card-deck campcards container-fluid">
			<% for(let name of recData){ %>
				<div class="card mb-3 mx-xs-4 p-2 campcard">
						<h2 class="card-title"><%=name.FacilityName%></h2>
						<div class="card-body" >
							<%-name.FacilityDescription%>
						</div>							
						<a href="/campsites/show/<%=name.FacilityID%>" class="btn btn-primary show-btn">More Information.</a>
				</div>			
			<% }; %>
		</div>		
	</div>

</div>
		<script>
			const mapToken = '<%-process.env.MAPBOX_API_1%>';
			const campsites =  {features: <%- JSON.stringify(mapData).toLowerCase() %>} ;
			console.log(campsites)
		</script>
		<script src="/js/map.js"></script>
		<%- include("../partials/footer") %> 